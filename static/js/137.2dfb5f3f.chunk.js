"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[137],{137:(e,s,a)=>{a.r(s),a.d(s,{default:()=>I});var n=a(2019),t=a(6399),l=a(5206),r=a(647),i=a(9073),d=a(7419),c=a(1645),o=a(5444),u=a(8444),m=a(3463),x=a(5043),h=a(3245);var j=a(9748),A=a(3913),p=a(4040),y=a(3003),g=a(579);const b=function(e){const[s]=j.A.useForm(),{userData:a}=(0,y.d4)((e=>e.userSlice)),{visible:t,hideModal:l,title:r,loadData:i}=e;return(0,x.useEffect)((()=>{"\u65b0\u589e\u4f01\u696d"===r?s.resetFields():s.setFieldsValue(a)}),[t]),(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(A.A,{title:r,open:t,onCancel:l,width:800,onOk:()=>{s.validateFields().then((async e=>{const{data:s}=await function(e){return(0,h.b)("/editUser",e)}(e);n.Ay.success(s),l(),i()})).catch((e=>{console.log(e)}))},children:(0,g.jsxs)(j.A,{form:s,labelCol:{span:8},wrapperCol:{span:16},children:[(0,g.jsxs)(d.A,{gutter:16,children:[(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u5ba2\u6236\u540d\u7a31",name:"name",rules:[{required:!0,message:"\u5ba2\u6236\u540d\u7a31\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})}),(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u806f\u7e6b\u96fb\u8a71",name:"tel",rules:[{required:!0,message:"\u806f\u7e6b\u96fb\u8a71\u4e0d\u80fd\u70ba\u7a7a"},{pattern:/^1[3-9]\d{9}$/,message:"\u8acb\u8f38\u5165\u6709\u6548\u7684\u624b\u6a5f\u865f"}],children:(0,g.jsx)(o.A,{})})})]}),(0,g.jsxs)(d.A,{gutter:16,children:[(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u7d93\u71df\u72c0\u614b",name:"status",rules:[{required:!0,message:"\u7d93\u71df\u72c0\u614b\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsxs)(p.Ay.Group,{children:[(0,g.jsx)(p.Ay,{value:"1",children:"\u71df\u696d\u4e2d"}),(0,g.jsx)(p.Ay,{value:"2",children:"\u66ab\u505c\u71df\u696d"}),(0,g.jsx)(p.Ay,{value:"3",children:"\u5df2\u95dc\u9589"})]})})}),(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u6240\u5c6c\u884c\u696d",name:"business",rules:[{required:!0,message:"\u6240\u5c6c\u884c\u696d\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})})]}),(0,g.jsxs)(d.A,{gutter:16,children:[(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u90f5\u7bb1",name:"email",rules:[{required:!0,message:"\u90f5\u7bb1\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})}),(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u7d71\u4e00\u4fe1\u7528\u4ee3\u78bc",name:"creditCode",rules:[{required:!0,message:"\u7d71\u4e00\u4fe1\u7528\u4ee3\u78bc\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})})]}),(0,g.jsxs)(d.A,{gutter:16,children:[(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u5de5\u5546\u8a3b\u518a\u865f",name:"industryNum",rules:[{required:!0,message:"\u5de5\u5546\u8a3b\u518a\u865f\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})}),(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u7d44\u7e54\u6a5f\u69cb\u4ee3\u78bc",name:"organizationCode",rules:[{required:!0,message:"\u7d44\u7e54\u6a5f\u69cb\u4ee3\u78bc\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})})]}),(0,g.jsx)(d.A,{gutter:16,children:(0,g.jsx)(c.A,{span:12,children:(0,g.jsx)(j.A.Item,{label:"\u6cd5\u4eba\u540d",name:"legalPerson",rules:[{required:!0,message:"\u6cd5\u4eba\u540d\u4e0d\u80fd\u70ba\u7a7a"}],children:(0,g.jsx)(o.A,{})})})})]})})})};var k=a(8817);const C=x.memo(b),I=function(){const[e,s]=(0,x.useState)([]),[a,j]=(0,x.useState)(1),[A,p]=(0,x.useState)(10),[b,I]=(0,x.useState)(0),[v,f]=(0,x.useState)(!1),[N,w]=(0,x.useState)([]),[S,q]=(0,x.useState)(!1),[z,F]=(0,x.useState)(""),D=(0,y.wA)(),[M,P]=(0,x.useState)({companyName:"",contact:"",phone:""}),T=(0,x.useMemo)((()=>!N.length),[N]);(0,x.useEffect)((()=>{U()}),[a,A]);const U=async()=>{f(!0);const{data:{total:e,list:n}}=await(t={...M,page:a,pageSize:A},(0,h.b)("/userList",t));var t;s(n),I(e),f(!1)},E=e=>{const{name:s,value:a}=e.target;P((e=>({...e,[s]:a})))},K={selectedRowKeys:N,onChange:(e,s)=>{w(e)}},X=async function(e){const{data:s}=await function(e){return(0,h.b)("/deleteUser",{id:e})}(e);n.Ay.success(s),U()},$=(0,x.useCallback)((()=>{q(!1)}),[]),_=[{title:"No.",key:"index",render:(e,s,a)=>a+1},{title:"\u5ba2\u6236\u540d\u7a31",key:"name",dataIndex:"name"},{title:"\u7d93\u71df\u72c0\u614b",key:"status",dataIndex:"status",render:e=>1===e?(0,g.jsx)(t.A,{color:"green",children:"\u71df\u696d\u4e2d"}):2===e?(0,g.jsx)(t.A,{color:"#f50",children:"\u66ab\u505c\u71df\u696d"}):3===e?(0,g.jsx)(t.A,{color:"red",children:"\u5df2\u95dc\u9589"}):void 0},{title:"\u806f\u7e6b\u96fb\u8a71",key:"tel",dataIndex:"tel"},{title:"\u6240\u5c6c\u884c\u696d",key:"business",dataIndex:"business"},{title:"\u90f5\u7bb1",key:"email",dataIndex:"email"},{title:"\u7d71\u4e00\u4fe1\u7528\u4ee3\u78bc",key:"creditCode",dataIndex:"creditCode"},{title:"\u5de5\u5546\u8a3b\u518a\u865f",key:"industryNum",dataIndex:"industryNum"},{title:"\u7d44\u7e54\u7d50\u69cb\u4ee3\u78bc",key:"organizationCode",dataIndex:"organizationCode"},{title:"\u6cd5\u4eba\u540d",key:"legalPerson",dataIndex:"legalPerson"},{title:"\u64cd\u4f5c",key:"operate",render:(e,s,a)=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.Ay,{type:"primary",size:"small",onClick:()=>(e=>{q(!0),F("\u7de8\u8f2f\u4f01\u696d"),D((0,k.sX)(e))})(s),children:"\u7de8\u8f2f"}),(0,g.jsx)(r.A,{title:"\u522a\u9664\u78ba\u8a8d",description:"\u78ba\u5b9a\u8981\u522a\u9664\u55ce",okText:"\u662f",cancelText:"\u5426",onConfirm:()=>X(s.id),children:(0,g.jsx)(l.Ay,{type:"primary",danger:!0,className:"ml",size:"small",children:"\u522a\u9664"})})]})}];return(0,g.jsxs)("div",{className:"users",children:[(0,g.jsx)(C,{visible:S,title:z,hideModal:$,loadData:U}),(0,g.jsx)(i.A,{className:"search",children:(0,g.jsxs)(d.A,{gutter:16,children:[(0,g.jsxs)(c.A,{span:7,children:[(0,g.jsx)("p",{children:"\u4f01\u696d\u540d\u7a31:"}),(0,g.jsx)(o.A,{name:"companyName",value:M.companyName,onChange:E})]}),(0,g.jsxs)(c.A,{span:7,children:[(0,g.jsx)("p",{children:"\u806f\u7d61\u4eba:"}),(0,g.jsx)(o.A,{name:"contact",value:M.contact,onChange:E})]}),(0,g.jsxs)(c.A,{span:7,children:[(0,g.jsx)("p",{children:"\u9023\u7d61\u96fb\u8a71:"}),(0,g.jsx)(o.A,{name:"phone",value:M.phone,onChange:E})]}),(0,g.jsxs)(c.A,{span:3,children:[(0,g.jsx)(l.Ay,{type:"primary",onClick:U,children:"\u67e5\u8a62"}),(0,g.jsx)(l.Ay,{className:"ml",onClick:()=>{w([]),P({companyName:"",contact:"",phone:""}),j(1),p(10),U()},children:"\u91cd\u7f6e"})]})]})}),(0,g.jsxs)(i.A,{className:"mt tr",children:[(0,g.jsx)(l.Ay,{type:"primary",onClick:()=>{q(!0),F("\u65b0\u589e\u4f01\u696d"),D((0,k.sX)({}))},children:"\u65b0\u589e\u4f01\u696d"}),(0,g.jsx)(l.Ay,{danger:!0,type:"primary",className:"ml",disabled:T,onClick:async()=>{const{data:e}=await(s=N,(0,h.b)("/batchDeleteUser",{ids:s}));var s;n.Ay.success(e),U()},children:"\u6279\u91cf\u522a\u9664"})]}),(0,g.jsxs)(i.A,{className:"mt",children:[(0,g.jsx)(u.A,{columns:_,dataSource:e,rowKey:e=>e.id,loading:v,rowSelection:K,pagination:!1}),(0,g.jsx)(m.A,{className:"fr mt",total:b,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`\u5171 ${e} \u689d`,onChange:(e,s)=>{j(e),p(s)},current:a,pageSize:A})]})]})}}}]);
//# sourceMappingURL=137.2dfb5f3f.chunk.js.map