"use strict";(self.webpackChunkreact_project=self.webpackChunkreact_project||[]).push([[8488],{6606:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(5043);const s=function(e,t){const[a,s]=(0,n.useState)([]),[i,l]=(0,n.useState)(1),[r,c]=(0,n.useState)(10),[o,d]=(0,n.useState)(0),[h,y]=(0,n.useState)(!1),[u,p]=(0,n.useState)(e),m=(0,n.useCallback)((async()=>{y(!0);try{const{data:{list:e,total:a}}=await t({page:i,pageSize:r,...u});s(e),d(a)}catch(e){console.log(e)}finally{y(!1)}}),[u,i,r,t]);return(0,n.useEffect)((()=>{m()}),[m]),{dataList:a,page:i,pageSize:r,total:o,loading:h,formData:u,setDataList:s,setPage:l,setPageSize:c,setTotal:d,setLoading:y,setFormData:p,loadData:m,onChange:(e,t)=>{l(e),c(t)},handleChange:e=>{const{name:t,value:a}=e.target;p((e=>({...e,[t]:a})))},reset:()=>{l(1),c(10),p(e)}}}},8488:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var n=a(5206),s=a(647),i=a(9073),l=a(7419),r=a(1645),c=a(5444),o=a(5432),d=a(8444),h=a(3463),y=a(2745),u=a(6606),p=a(5043),m=a(579);const k=(e,t)=>function(a){const n=n=>e.every((e=>t.includes(e)))?(0,m.jsx)(a,{...n}):null;return n.displayName=`WithPermissions(${a.displayName||a.name||"Component"})`,n};var x=a(6148);const g=[{title:"\u5de5\u4f5c\u53f0",key:"/dashboard"},{title:"\u79df\u6236\u7ba1\u7406",key:"/users",children:[{title:"\u79df\u6236\u5217\u8868",key:"/users/list"},{title:"\u65b0\u589e\u79df\u6236",key:"/users/add"}]},{title:"\u7269\u696d\u7ba1\u7406",key:"/estate",children:[{title:"\u6a13\u5b87\u7ba1\u7406",key:"/estate/tenement"},{title:"\u623f\u9593\u7ba1\u7406",key:"/estate/room"},{title:"\u8eca\u8f1b\u4fe1\u606f",key:"/estate/car"}]},{title:"\u5831\u4fee\u7ba1\u7406",key:"/repair"},{title:"\u8ca1\u52d9\u7ba1\u7406",key:"/finance",children:[{title:"\u5408\u540c\u7ba1\u7406",key:"/finance/contract"},{title:"\u5408\u540c\u8a73\u60c5",key:"/finance/surrender"},{title:"\u5e33\u55ae\u7ba1\u7406",key:"/finance/bill"}]},{title:"\u62db\u5546\u7ba1\u7406",key:"/merchants"},{title:"\u904b\u71df\u7ba1\u7406",key:"/operation",children:[{title:"\u904b\u71df\u7e3d\u89bd",key:"/operation/all"},{title:"\u6587\u7ae0\u767c\u5e03",key:"/operation/article"},{title:"\u5167\u5bb9\u8a55\u8ad6",key:"/operation/comments"}]},{title:"\u8a2d\u5099\u7ba1\u7406",key:"/equipment"},{title:"\u80fd\u6e90\u6d88\u8017",key:"/energy"},{title:"\u7cfb\u7d71\u8a2d\u7f6e",key:"/settings"},{title:"\u500b\u4eba\u4e2d\u5fc3",key:"/personal"}];function j(e){let t=[];return e.forEach((e=>{if(e.children&&e.children.length>0){const a=j(e.children);t=t.concat(a)}else t.push(e.key)})),t}const A=function(){const e=k(["delete"],JSON.parse(sessionStorage.getItem("btnAuth")))(n.Ay),t=[{title:"No.",key:"index",render:(e,t,a)=>a+1},{title:"\u5e33\u865f\u540d\u7a31",dataIndex:"accountName",key:"accountName"},{title:"\u6240\u5c6c\u6b0a\u9650",dataIndex:"auth",key:"auth"},{title:"\u4f7f\u7528\u4eba",dataIndex:"person",key:"person"},{title:"\u4f7f\u7528\u4eba\u96fb\u8a71",dataIndex:"tel",key:"tel"},{title:"\u6240\u5c6c\u90e8\u9580",dataIndex:"department",key:"department"},{title:"\u64cd\u4f5c",key:"operate",render:(t,a)=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.Ay,{size:"small",type:"primary",className:"mr",onClick:()=>((e,t)=>{A(t);const a=j(e);N(a)})(a.menu,a.accountName),children:"\u4fee\u6539\u6b0a\u9650"}),(0,m.jsx)(s.A,{title:"\u64cd\u4f5c\u63d0\u793a",description:"\u78ba\u8a8d\u8981\u522a\u9664\u7576\u524d\u5e33\u865f\u55ce\uff1f",okText:"\u662f",cancelText:"\u5426",children:(0,m.jsx)(e,{size:"small",type:"primary",danger:!0,children:"\u522a\u9664\u5e33\u865f"})})]})}],[a,A]=(0,p.useState)("\u7576\u524d\u7528\u6236"),{menuList:f}=(0,x.G)((e=>e.authSlice)),[S,N]=(0,p.useState)([]),{dataList:C,page:b,pageSize:v,total:z,loading:D,formData:I,onChange:w,handleChange:L}=(0,u.A)({accountName:""},y.aN);return(0,p.useEffect)((()=>{N(j(f))}),[f]),(0,m.jsxs)("div",{children:[(0,m.jsx)(i.A,{children:(0,m.jsxs)(l.A,{gutter:16,children:[(0,m.jsx)(r.A,{span:8,children:(0,m.jsx)(c.A,{name:"accountName",value:I.accountName,placeholder:"\u8acb\u8f38\u5165\u5e33\u6236\u540d",onChange:L})}),(0,m.jsx)(r.A,{span:8,children:(0,m.jsx)(n.Ay,{type:"primary",children:" \u641c\u5c0b"})}),(0,m.jsx)(r.A,{span:8,className:"tr",children:(0,m.jsx)(n.Ay,{type:"primary",children:"\u65b0\u5efa\u5e33\u865f"})})]})}),(0,m.jsxs)(l.A,{gutter:16,className:"mt",children:[(0,m.jsxs)(r.A,{span:8,children:[(0,m.jsx)(i.A,{title:a+":\u6240\u64c1\u6b0a\u9650",children:(0,m.jsx)(o.A,{checkable:!0,treeData:g,checkedKeys:S,onCheck:e=>{N(e)}})}),(0,m.jsx)(i.A,{className:"mt",children:(0,m.jsx)(s.A,{title:"\u64cd\u4f5c\u63d0\u793a",description:`\u60a8\u78ba\u8a8d\u8981\u4fee\u6539${a}\u7528\u6236\u7684\u6b0a\u9650\u55ce\uff1f}`,okText:"\u662f",cancelText:"\u5426",onConfirm:()=>{console.log(S,a)},children:(0,m.jsx)(n.Ay,{type:"primary",children:"\u63d0\u4ea4\u4fee\u6539"})})})]}),(0,m.jsx)(r.A,{span:16,children:(0,m.jsxs)(i.A,{children:[(0,m.jsx)(d.A,{loading:D,columns:t,dataSource:C,rowKey:e=>e.id,pagination:!1}),(0,m.jsx)(h.A,{className:"fr mr",showQuickJumper:!0,total:z,current:b,pageSize:v,onChange:w})]})})]})]})}}}]);
//# sourceMappingURL=8488.32158c99.chunk.js.map